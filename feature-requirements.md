# ğŸ¯ Cookie Manager åŒæ­¥åŠŸèƒ½éœ€æ±‚æ•´ç†

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½åˆ—è¡¨

### 1. æœåŠ¡å™¨é…ç½®ç®¡ç†
- âœ… æœåŠ¡å™¨URLé…ç½®
- âœ… å¯¹ç§°åŠ å¯†å¯†é’¥è®¾ç½®ï¼ˆå…¨å±€ï¼‰
- âœ… æœåŠ¡å™¨è¿æ¥æµ‹è¯•
- âœ… åŠ å¯†å¼€å…³æ§åˆ¶

### 2. åŸŸåçº§åˆ«åŒæ­¥é…ç½®
- âœ… æŒ‰åŸŸåç‹¬ç«‹é…ç½®åŒæ­¥å¼€å…³
- âœ… CookieåŒæ­¥å¼€å…³
- âœ… LocalStorageåŒæ­¥å¼€å…³
- âœ… åŒæ­¥é—´éš”è®¾ç½®ï¼ˆ5-60åˆ†é’Ÿï¼‰

### 3. ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ
```javascript
// ç‰ˆæœ¬ç®¡ç†è§„åˆ™
const versionRules = {
    maxVersions: 5,           // æœ€å¤šä¿å­˜5ä¸ªç‰ˆæœ¬
    serverVersions: 2,        // å¼ºåˆ¶ä¿ç•™2ä¸ªæœåŠ¡å™¨ç‰ˆæœ¬
    localVersions: 3,         // æœ€å¤š3ä¸ªæœ¬åœ°ç‰ˆæœ¬
    autoCleanup: true         // è‡ªåŠ¨æ¸…ç†æ—§ç‰ˆæœ¬
};
```

### 4. æ™ºèƒ½åŒæ­¥ç­–ç•¥
```javascript
// åŒæ­¥å†³ç­–é€»è¾‘
const syncDecision = {
    onExtensionStart: 'checkServer',     // å¯åŠ¨æ—¶æ£€æŸ¥æœåŠ¡å™¨
    conflictResolution: 'newerWins',     // æ–°ç‰ˆæœ¬ä¼˜å…ˆ
    changeDetection: 'hashComparison',   // åŸºäºå“ˆå¸Œçš„å˜æ›´æ£€æµ‹
    autoSync: true,                      // è‡ªåŠ¨åŒæ­¥
    manualOverride: true                 // æ”¯æŒæ‰‹åŠ¨æ“ä½œ
};
```

### 5. æ•°æ®å®‰å…¨
- âœ… å®¢æˆ·ç«¯å¯¹ç§°åŠ å¯†
- âœ… æ•°æ®å®Œæ•´æ€§æ ¡éªŒï¼ˆSHA-256ï¼‰
- âœ… å¯é€‰çš„æœåŠ¡å™¨ç«¯è§£å¯†
- âœ… æ•æ„Ÿæ•°æ®è¿‡æ»¤

### 6. ç”¨æˆ·ç•Œé¢
- âœ… åŒæ­¥çŠ¶æ€æ˜¾ç¤º
- âœ… æ•°æ®æ¥æºæ ‡è¯†ï¼ˆæœ¬åœ°/æœåŠ¡å™¨ï¼‰
- âœ… æœ€ååŒæ­¥æ—¶é—´
- âœ… ç‰ˆæœ¬å†å²æŸ¥çœ‹
- âœ… æ‰‹åŠ¨åŒæ­¥æ§åˆ¶

## ğŸ”„ åŒæ­¥å·¥ä½œæµç¨‹

### å¯åŠ¨æ—¶åŒæ­¥æµç¨‹
```mermaid
graph TD
    A[æ‰©å±•å¯åŠ¨] --> B[æ£€æŸ¥æœåŠ¡å™¨é…ç½®]
    B --> C{æœåŠ¡å™¨å¯ç”¨?}
    C -->|æ˜¯| D[è·å–æœåŠ¡å™¨ç‰ˆæœ¬ä¿¡æ¯]
    C -->|å¦| E[ä½¿ç”¨æœ¬åœ°æ•°æ®]
    D --> F{æ¯”è¾ƒç‰ˆæœ¬æ—¶é—´æˆ³}
    F -->|æœåŠ¡å™¨æ›´æ–°| G[ä¸‹è½½æœåŠ¡å™¨æ•°æ®]
    F -->|æœ¬åœ°æ›´æ–°| H[ä¸Šä¼ æœ¬åœ°æ•°æ®]
    F -->|ç›¸åŒ| I[æ— éœ€åŒæ­¥]
    G --> J[åº”ç”¨åˆ°å½“å‰é¡µé¢]
    H --> K[åˆ›å»ºæœåŠ¡å™¨ç‰ˆæœ¬]
    I --> L[æ˜¾ç¤ºåŒæ­¥çŠ¶æ€]
    J --> L
    K --> L
```

### å®šæ—¶åŒæ­¥æµç¨‹
```mermaid
graph TD
    A[å®šæ—¶å™¨è§¦å‘] --> B[æ£€æŸ¥å½“å‰åŸŸåé…ç½®]
    B --> C{å¯ç”¨åŒæ­¥?}
    C -->|å¦| D[è·³è¿‡åŒæ­¥]
    C -->|æ˜¯| E[æ£€æµ‹æ•°æ®å˜æ›´]
    E --> F{æœ‰å˜æ›´?}
    F -->|å¦| G[æ— éœ€åŒæ­¥]
    F -->|æ˜¯| H[æ‰§è¡ŒåŒæ­¥é€»è¾‘]
    H --> I[æ›´æ–°ç‰ˆæœ¬å†å²]
    I --> J[æ˜¾ç¤ºåŒæ­¥ç»“æœ]
```

## ğŸ“Š æ•°æ®ç»“æ„è®¾è®¡

### åŒæ­¥é…ç½®
```javascript
const syncConfig = {
    server: {
        url: 'https://api.example.com',
        encryptionKey: 'user-generated-key',
        enableEncryption: true,
        timeout: 10000
    },
    domains: {
        'example.com': {
            enableCookieSync: true,
            enableStorageSync: true,
            syncInterval: 5,
            lastSyncTime: '2024-12-14T10:00:00Z',
            dataSource: 'server' // 'local' | 'server'
        }
    },
    general: {
        autoSync: true,
        maxVersions: 5,
        minServerVersions: 2
    }
};
```

### ç‰ˆæœ¬å¿«ç…§
```javascript
const versionSnapshot = {
    id: 'uuid-v4',
    domain: 'example.com',
    timestamp: '2024-12-14T10:00:00Z',
    source: 'local', // 'local' | 'server'
    data: {
        cookies: { 'name': 'value' },
        localStorage: { 'key': 'value' }
    },
    metadata: {
        encrypted: true,
        hash: 'sha256-hash',
        size: 1024,
        changeCount: 5
    }
};
```

## ğŸ¨ UI/UX è®¾è®¡è¦ç‚¹

### çŠ¶æ€æŒ‡ç¤ºå™¨
```javascript
const statusIndicators = {
    connected: { color: 'green', text: 'å·²è¿æ¥æœåŠ¡å™¨' },
    disconnected: { color: 'red', text: 'æœåŠ¡å™¨ç¦»çº¿' },
    syncing: { color: 'blue', text: 'åŒæ­¥ä¸­...' },
    conflict: { color: 'orange', text: 'å­˜åœ¨å†²çª' },
    error: { color: 'red', text: 'åŒæ­¥å¤±è´¥' }
};
```

### æ•°æ®æ¥æºæ ‡è¯†
- ğŸŒ æœåŠ¡å™¨æ•°æ®ï¼ˆç»¿è‰²å›¾æ ‡ï¼‰
- ğŸ’» æœ¬åœ°æ•°æ®ï¼ˆè“è‰²å›¾æ ‡ï¼‰
- âš ï¸ å†²çªçŠ¶æ€ï¼ˆæ©™è‰²å›¾æ ‡ï¼‰
- âŒ åŒæ­¥å¤±è´¥ï¼ˆçº¢è‰²å›¾æ ‡ï¼‰

## ğŸš€ å®æ–½ä¼˜å…ˆçº§

### Phase 1: åŸºç¡€åŠŸèƒ½ (2-3å‘¨)
1. æœåŠ¡å™¨é…ç½®ç®¡ç†
2. åŸºç¡€åŒæ­¥é€»è¾‘
3. ç®€å•åŠ å¯†å®ç°
4. åŸºç¡€UIç•Œé¢

### Phase 2: å¢å¼ºåŠŸèƒ½ (3-4å‘¨)
1. ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ
2. å†²çªæ£€æµ‹å’Œè§£å†³
3. è‡ªåŠ¨åŒæ­¥æœºåˆ¶
4. çŠ¶æ€æŒ‡ç¤ºä¼˜åŒ–

### Phase 3: é«˜çº§åŠŸèƒ½ (4-6å‘¨)
1. ç®¡ç†åå°å¼€å‘
2. é«˜çº§åŠ å¯†é€‰é¡¹
3. æ€§èƒ½ä¼˜åŒ–
4. ç›‘æ§å’Œæ—¥å¿—

## âš ï¸ å…³é”®é£é™©ç‚¹

### æŠ€æœ¯é£é™©
- æ•°æ®åŒæ­¥å†²çªå¤„ç†å¤æ‚
- åŠ å¯†å¯†é’¥ç®¡ç†å®‰å…¨æ€§
- ç½‘ç»œå¼‚å¸¸å¤„ç†

### ç”¨æˆ·ä½“éªŒé£é™©
- é…ç½®è¿‡äºå¤æ‚
- åŒæ­¥çŠ¶æ€ä¸æ¸…æ™°
- æ•°æ®ä¸¢å¤±é£é™©

### ä¸šåŠ¡é£é™©
- æœåŠ¡å™¨ç»´æŠ¤æˆæœ¬
- æ³•å¾‹åˆè§„è¦æ±‚
- ç”¨æˆ·éšç§ä¿æŠ¤

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### ç®€åŒ–ç”¨æˆ·ä½“éªŒ
1. æä¾›é¢„è®¾é…ç½®æ¨¡å¼
2. æ™ºèƒ½é»˜è®¤è®¾ç½®
3. å¼•å¯¼å¼åˆå§‹åŒ–
4. ä¸€é”®åŒæ­¥åŠŸèƒ½

### æå‡å¯é æ€§
1. ç¦»çº¿æ¨¡å¼æ”¯æŒ
2. æ•°æ®å¤‡ä»½æœºåˆ¶
3. é”™è¯¯æ¢å¤ç­–ç•¥
4. æ¸è¿›å¼åŒæ­¥

### å¢å¼ºå®‰å…¨æ€§
1. ç«¯åˆ°ç«¯åŠ å¯†
2. è®¿é—®æ§åˆ¶
3. å®¡è®¡æ—¥å¿—
4. æ•°æ®è„±æ•

è¿™ä¸ªåŠŸèƒ½è®¾è®¡æ—¢ä¿æŒäº†ä½ åŸå§‹éœ€æ±‚çš„æ ¸å¿ƒä»·å€¼ï¼Œåˆé€šè¿‡åˆç†çš„ç®€åŒ–å’Œä¼˜åŒ–ï¼Œæé«˜äº†å®ç°çš„å¯è¡Œæ€§å’Œç”¨æˆ·ä½“éªŒã€‚